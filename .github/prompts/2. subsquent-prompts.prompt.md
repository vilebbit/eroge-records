---
mode: 'agent'
model: Claude Sonnet 4.5
description: 'Create a new Next.js project'
---

Great, now start implementing the plan you just created.

---

You did a greate job, but I would like to request 2 changes.

First, I see you write our own functions to parse datetime strings, that maybe works, but I think we should use a battle-experienced library so it can be less error-prone. I installed a new library `dayjs` into the project, can you change the logic to use that library?
Second, I forgot to tell you that our website need to support i18n. I installed a new library `react-i18next` into our project, can you use it to implemente i18n features? We need to support 3 languages: English (primary), Chinese and Japanese. Also please note the `/consent` page doesn't need to support i18n, please don't change that page.

---

I have changed the structure and the data fetching method to statistics and overall routes, please use these as examples for your future work when you need to create new routes.

Now I would like to request several changes.
1. Remove the "Home" Link from the navbar. We already have a website title as a link pointing to the root page on the navbar, so "Home" link is redundant.

2. Update the root page. Inspired by the overall page that you have created, I think perhaps display some lifetime records on the root page would be a good option. For example, the total games amount, the currently playing games amount, the completed games amount, and the total play time.

3. Move `RecentGamesGrid` from statistics page to the root page, under the newly added lifetime records block, and divide it to 2 sections. One for the recently playing games (the playStatus is "playing"), one for recently completed games (the playStatus is "partial" or "finished"), and limit each section has at most 6 games displayed. Please use `queryAllGames` from `@/lib/db/query.ts` to retrieve the data, and note the data retrieved from this function is not sorted or filtered, so you need to filter the games which has the `lastRunDate` field within 1 year and sort it by `lastRunDate` desc.

--

Good work. Now, I made some changes to `@/locales/zh.json`, please use it as an example and propagate these changes to `en.json` and `ja.json`.

---

Good, now let's add another route `/collections` to our website.

This route is used to display several collections of games, such as "RPG" and "FPS". Each collection is a rectangle, it should have a cover image and a collection name, the rectangle itself is a link, links to the next level of the dynamic path (`/collections/[collectionId]`).
You need to use `queryCollections()` in #file:query.ts  to retrieve an array of `GameCollectionDoc` from remote CouchDB server, each `GameCollectionDoc` contains a string array named `games`, each string is an id of a game, which equals to ``GameDoc`'s `_id` field. Then use `queryAllGames()` to retrieve all game docs, find the first occurrence of the game which's `_id` is included in the collection, and use that game's cover url (`GameDoc.metadata.extra.["Cover"].value`) as the collection's cover image.

After that, add `/collections/[collectionId]` route. This is a dynamic route, the `[collectionId]` is equals to the `_id` field of a `GameCollectionDoc`. This page displays all games inside the corresponding collection, each game is a rectangle, with cover image, game title, rating score, and play time included.

As a remind, please remember to add proper animations to these pages.

---

Great. Now, I made some changes to `@/locales/zh.json` again, please use it as an example and propagate these changes to `en.json` and `ja.json`. After that, please find if there are unused strings in locale files and delete them if you find any.
